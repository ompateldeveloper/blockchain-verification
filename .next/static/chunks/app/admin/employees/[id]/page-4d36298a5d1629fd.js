(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{757:(e,t,r)=>{Promise.resolve().then(r.bind(r,6086))},7594:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(1517),i=r(2115),n=r(3312),d=r(7301),l=r(3900),c=r(8986),o=r(2679),m=r(582),u=r(8982),h=r(7594),x=r(8617),p=r(9606),v=r(2353),g=r(3595);function f(e){var t,r,f,b,y,j,z,k;let[N,w]=i.useState("idle"),[E,D]=i.useState(""),S=i.useRef(null),{register:_,handleSubmit:R,reset:q,formState:{errors:F}}=(0,p.mN)({resolver:(0,o.u)(g.w)});(0,i.useEffect)(()=>{q(e.employee)},[e]);let I=async e=>{var t;let r=new m.k(null===(t=window)||void 0===t?void 0:t.ethereum),a=await r.getSigner(),s="0x86686D239bc67de752B28b7A12c7D5Df0fE551C0";if(!s)throw Error("Contract address is not defined");let i=new u.NZ(s,v.HV,a),n=await i.updateExperience(e.empId,"".concat(e.fname," ").concat(e.mname," ").concat(e.lname),"Accentiqa",String(e.startDate),String(e.endDate),e.pfNumber);return(await n.wait()).logs[0].args[0]},J=async e=>{s.K.post("/employees",e).then(e=>{w("Updating hash on blockchain")}).catch(e=>{console.error("Error adding employee:",e),w("idle"),D("Error adding employee to Database")});let t=await I(e);w("Updating hash on database"),s.K.post("/employees/update-hash/".concat(e.empId),{empHash:t}).then(e=>{var t;w("idle"),null===(t=S.current)||void 0===t||t.click(),q()}).catch(e=>{console.error("Error adding employee:",e),w("idle"),D("Error adding employee to Database")})};return(0,a.jsxs)("form",{className:" flex flex-col px-2 pt-4 space-y-2 relative",onSubmit:R(J),children:["idle"!==N&&(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-4 bg-zinc-50 dark:bg-gray-900 rounded-md shadow-md",children:(0,a.jsxs)("div",{children:[N,(0,a.jsx)("div",{className:"animate-spin w-min",children:(0,a.jsx)(h.A,{})})]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"fname",children:"First Name *"}),(0,a.jsx)(l.p,{..._("fname")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(t=F.fname)||void 0===t?void 0:t.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"mname",children:"Middle Name *"}),(0,a.jsx)(l.p,{..._("mname")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(r=F.mname)||void 0===r?void 0:r.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"lname",children:"Last Name *"}),(0,a.jsx)(l.p,{..._("lname")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(f=F.lname)||void 0===f?void 0:f.message})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"email",children:"Email *"}),(0,a.jsx)(l.p,{..._("email")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(b=F.email)||void 0===b?void 0:b.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"empId",children:"Employee ID *"}),(0,a.jsx)(l.p,{..._("empId")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(y=F.empId)||void 0===y?void 0:y.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"pfNumber",children:"PF Number *"}),(0,a.jsx)(l.p,{..._("pfNumber")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(j=F.pfNumber)||void 0===j?void 0:j.message})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"startDate",children:"Start Date *"}),(0,a.jsx)(l.p,{type:"date",..._("startDate",{valueAsDate:!0})}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(z=F.startDate)||void 0===z?void 0:z.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{htmlFor:"endDate",className:"flex items-center gap-1",children:["End Date",(0,a.jsxs)(d.jc,{children:[(0,a.jsx)(d.d0,{children:(0,a.jsx)(x.A,{className:"w-4"})}),(0,a.jsx)(d.Et,{children:"Leave empty if the employee is still active"})]})]}),(0,a.jsx)(l.p,{type:"date",..._("endDate")}),(0,a.jsx)("div",{className:"text-red-500 dark:text-red-600 text-xs",children:null==F?void 0:null===(k=F.endDate)||void 0===k?void 0:k.message})]})]}),(0,a.jsx)(n.$,{type:"submit",children:"Submit"})]})}var b=r(6046);function y(){let e=(0,b.useParams)(),[t,r]=(0,i.useState)();async function n(){try{let t=await s.K.get("/employees/"+e.id);r(t.data)}catch(e){console.error("Error fetching employee data:",e)}}return((0,i.useEffect)(()=>{n()},[e.id]),t)?(0,a.jsx)("div",{children:(0,a.jsx)(f,{employee:t})}):(0,a.jsx)("div",{children:"Loading..."})}},3595:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var a=r(3415);let s=a.z.object({fname:a.z.string().min(2,"First name must be at least 2 characters long"),mname:a.z.string().min(1,"Middle name must be at least 1 characters long").optional().or(a.z.literal("")),lname:a.z.string().min(2,"Last name must be at least 2 characters long"),email:a.z.string().email(),empId:a.z.string().min(1),pfNumber:a.z.string().min(1),startDate:a.z.date({required_error:"Start date is required"}),endDate:a.z.string().optional().transform(e=>e?new Date(e):void 0).refine(e=>!e||!isNaN(e.getTime()),{message:"Invalid date format"})})},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(5155),s=r(2115),i=r(2317),n=r(1027),d=r(1567);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-zinc-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-zinc-50 dark:hover:bg-red-900/90",outline:"border border-zinc-200 bg-white hover:bg-zinc-100 hover:text-zinc-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",secondary:"bg-zinc-100 text-zinc-900 hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:c=!1,...o}=e,m=c?i.DX:"button";return(0,a.jsx)(m,{className:(0,d.cn)(l({variant:s,size:n,className:r})),ref:t,...o})});c.displayName="Button"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5155),s=r(2115),i=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-base ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-zinc-950 placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:file:text-zinc-50 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",r),ref:t,...n})});n.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(5155),s=r(2115),i=r(6195),n=r(1027),d=r(1567);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,d.cn)(l(),r),...s})});c.displayName=i.b.displayName},582:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var a=r(7631),s=r(2732);class i extends s._y{#e;constructor(e,t,r){let s=Object.assign({},null!=r?r:{},{batchMaxCount:1});(0,a.MR)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,s),this.#e=async(t,r)=>{let a={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:a});try{let t=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,a.MR)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,780,942,572,149,985,441,517,358],()=>t(757)),_N_E=e.O()}]);